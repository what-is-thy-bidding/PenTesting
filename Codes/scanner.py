#!/bin/python3

import sys #allows us to enter command line arguments among other things
import socket #If we want to connect to a socket stream, to connect to a ip and a  port conn.
from datetime import datetime

#Define our target
#python3 scanner.py <ip>

if len(sys.argv)==2:
	target=socket.gethostbyname(sys.argv[1]) #translate a host name to IPV4
else:
	print("invalid amount of arguments")
	print("Syntax: python3 scanner.py<ip>")
	sys.exit #if you don't exit, it will hang

#Add a pretty banner
print("-" * 50)
print("Scanning target " + target)
print("Time started "  + str(datetime.now()))
print("-" * 50)

try:
	for port in range(50,85):
		s=socket.socket(socket.AF_INET,socket.SOCK_STREAM)
		# AF_INET = IPV4
		# SOCK_STREAM = PORT
		socket.setdefaulttimeout(1) #is a float,if it doesn't detect
					    # the port is open then it will 
					    #move on after 1 second
		
		result= s.connect_ex((target.port)) #returns error indicator
					#if there is no error on connection it
					#returns 0
		print("Checking port{}".format(port))
		
		if result==0:
			print("Port{} is open" .format(port))
		s.close()

except KeyboardInterrupt:
	print("\n Exiting program.")
	sys.exit()

except socket.gaierror:
	print("Hostname could not be resolved.")
	sys.exit()

except socket.error:
	print("Couldn't connect to server.")
	sys.exit()

	

